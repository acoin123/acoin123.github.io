lego.define("u/funnyday/funnyday.js",function(t,n,e){"use strict";var i=t("c/util/util.js"),s=function(t){var n=this;n.el={$root:t,$next:i.domFind(t,".next")[0],$pageNum:i.domFind(t,".page-info strong")[0],$pageTotal:i.domFind(t,".page-info .total")[0],$content:i.domFind(t,".funny-content")[0],$publishTime:i.domFind(t,".publish-time")[0],$funnyContainer:i.domFind(t,".funny-items")[0],$replaceImg:i.domFind(t,".js-onload-hide-titleText")[0],$titleText:i.domFind(t,".title-text")[0],$funnyItems:i.domFind(t,".funny-content"),$shareContainer:null},this.shareUrl=t.dataset.share,this.index=0,this.total=this.el.$funnyItems.length,this.shareInfo={}},o=s.prototype;o.eventStat=function(t){try{var n={section:"funnyDay",op:t.op,position:t.position||"",desc:t.desc||""};window.waStat.eventStat(n)}catch(e){console.error(e)}},o.next=function(){this.eventStat({op:"next"}),this.el.$funnyItems[this.index].classList.add("hide"),this.index++,this.index===this.total&&(this.index=0),this.el.$funnyItems[this.index].classList.remove("hide"),this.el.$pageNum.innerHTML=this.index+1,this.el.$shareContainer&&this.setShareInfo()},o.setShareInfo=function(){var t=this.el.$funnyItems[this.index];this.shareInfo.title=t.dataset.title||"";var n=t.dataset.pos,e=t.dataset.id,s=i.domFind(this.el.$funnyItems[this.index],"p")[0];this.shareInfo.url=this.shareUrl+"id="+e+"!!pos="+n,this.shareInfo.cont=s.innerHTML},o.init=function(){i.addEvent(this.el.$next,"click",this.next.bind(this))},e.exports=function(){for(var t=i.domFind(".funny-day"),n=0,e=t.length;e>n;n++){var o=new s(t[n]);o.init()}},e.exports()},!0);